---
title: "查詢支付訂單"
slug: "query-payment-order"
excerpt: ""
hidden: false
createdAt: "Wed Mar 13 2024 15:45:13 GMT+0000 (Coordinated Universal Time)"
updatedAt: "Thu May 23 2024 10:19:53 GMT+0000 (Coordinated Universal Time)"
---
商家通過此API查詢訂單，支付網關將傳回最新的訂單信息。

***

請求路徑 : api/pay/query

請求方式 : `POST`

請求類型 : `application/json` or `application/x-www-form-urlencoded`

### 請求參數

| 參數名稱       | 描述                                       | 範例                               |
| ---------- | ---------------------------------------- | -------------------------------- |
| mchNo      | **必填**。商家號碼                              | M1621873433953                   |
| appId      | **必填**。應用程式 ID                           | 60cc09bce4b0f1c0b83761c9         |
| reqTime    | **必填**。請求API時間，13位元時間戳                   | 1622016572190                    |
| version    | **必填**。版本號，固定：1.0                        | 1.0                              |
| sign       | **必填**。簽名值，詳見請求簽名                        | C380BEC2BFD727A4B6845133519F3AD6 |
| signType   | **必填**。簽名類型，目前僅支援MD5方式                   | MD5                              |
| mchOrderNo | 商家唯一訂單編號。mchOrderNo、payOrderId不可同時為空。    | 20160427210604000490             |
| payOrderId | 支付網關產生的訂單號碼。mchOrderNo、payOrderId不可同時為空。 | P20160427210604000490            |

範例:

```json request body
{
  "payOrderId": "P202106181104177050002",
  "appId": "60cc09bce4b0f1c0b83761c9",
  "sign": "46940C58B2F3AE426B77A297ABF4D31E",
  "signType": "MD5",
  "reqTime": "1624006009",
  "mchNo": "M1623984572",
  "version": "1.0"
}
```

### 回應:

| 參數       | 描述                                 | 範例                               |
| -------- | ---------------------------------- | -------------------------------- |
| code     | **必填**。0-處理成功，其他-處理錯誤，具體參見錯誤碼      | 0                                |
| msg      | **必填**。具體錯誤原因，如：簽名失敗、參數格式驗證錯誤      | Signing failure                  |
| sign     | **必填**。對data中的資料進行簽名。如果資料為空，則不會傳回。 | CCD9083A6DAD9A2DA9F668C3D4517A84 |
| **data** | **必填**。返回訂單數據，json格式數據             | {}                               |

Data Parameter:

[block:parameters]
{
  "data": {
    "h-0": "Parameter ",
    "h-1": "Description",
    "h-2": "Sample value",
    "0-0": "payOrderId",
    "0-1": "**必填**。返回付款系統訂單編號",
    "0-2": "P12021022311124442600",
    "1-0": "mchNo",
    "1-1": "**必填**。商家號碼",
    "1-2": "M1621873433953",
    "2-0": "appId",
    "2-1": "**必填**。應用程式 ID",
    "2-2": "60cc09bce4b0f1c0b83761c9",
    "3-0": "mchOrderNo",
    "3-1": "**必填**。返回商家傳入的訂單編號",
    "3-2": "20160427210604000490",
    "4-0": "wayCode",
    "4-1": "**必填**。付款方式，如CHANNEL_CASHIER",
    "4-2": "CHANNEL_CASHIER",
    "5-0": "amount",
    "5-1": "**必填**。付款金額，單位分",
    "5-2": "1000",
    "6-0": "currency",
    "6-1": "**必填**。三位數貨幣代碼，人民幣：cny",
    "6-2": "cny",
    "7-0": "state",
    "7-1": "**必填**。付款訂單狀態  \n0：訂單生成  \n1：付款中  \n2：支付成功  \n3：支付失敗  \n4：取消  \n5：退款  \n6：訂單關閉",
    "7-2": "2",
    "8-0": "clientIp",
    "8-1": "用戶端 IPV4 位址",
    "8-2": "210.73.10.148",
    "9-0": "subject",
    "9-1": "產品標題",
    "9-2": "標題測試",
    "10-0": "body",
    "10-1": "產品說明",
    "10-2": "描述測試",
    "11-0": "payUrl",
    "11-1": "支付url。**當前只有收銀台訂單才會返回。**",
    "11-2": "",
    "12-0": "channelOrderNo",
    "12-1": "對應通道的訂單編號",
    "12-2": "20160427210604000490",
    "13-0": "errCode",
    "13-1": "通道訂單回傳錯誤碼",
    "13-2": "1002",
    "14-0": "errMsg",
    "14-1": "通道訂單回傳錯誤說明",
    "14-2": "134586944573118714",
    "15-0": "extParam",
    "15-1": "商家擴充參數，回呼時原樣返回",
    "15-2": "134586944573118714",
    "16-0": "createdAt",
    "16-1": "訂單建立時間，13位時間戳",
    "16-2": "1622016572190",
    "17-0": "successTime",
    "17-1": "訂單支付成功時間，13位時間戳",
    "17-2": "1622016572190"
  },
  "cols": 3,
  "rows": 18,
  "align": [
    null,
    null,
    null
  ]
}
[/block]
