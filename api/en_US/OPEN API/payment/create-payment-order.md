---
title: "Create Payment Order"
slug: "create-payment-order"
excerpt: ""
hidden: false
createdAt: "Wed Mar 13 2024 15:18:55 GMT+0000 (Coordinated Universal Time)"
updatedAt: "Mon May 13 2024 11:04:15 GMT+0000 (Coordinated Universal Time)"
---
The merchant's business system initiates a payment order through the API, and the PassToPasy gateway will route the payment channel according to the payment channel configured by the merchant to complete the payment order.   The payment gateway returns corresponding payment parameters according to different payment methods, and the system uses the payment parameters to initiate payment collection.

***

Request Path: /api/pay/unifiedOrder

Request method: `POST`

Request type: `application/json` or `application/x-www-form-urlencoded`

### Request Parameter

[block:parameters]
{
  "data": {
    "h-0": "Parameter",
    "h-1": "Description",
    "h-2": "Sample",
    "0-0": "mchNo",
    "0-1": "**required**.Merchant Number.",
    "0-2": "M1621873433953",
    "1-0": "appId",
    "1-1": "**required**.App ID.",
    "1-2": "60cc09bce4b0f1c0b83761c9",
    "2-0": "mchOrderNo",
    "2-1": "**required**.Order number generated by the merchant.",
    "2-2": "20160427210604000490",
    "3-0": "wayCode",
    "3-1": "**required**.Payment method, such as using a three-party cashier: ALI_QR.see the [Payment method](https://pass2pay.readme.io/reference/payment-method)  description",
    "3-2": "ALI_QR",
    "4-0": "amount",
    "4-1": "**required**.Payment amount, **unit cent**. <span style=\"color:red\">Please use integer type.</span>",
    "4-2": "100",
    "5-0": "currency",
    "5-1": "**required**.Three-digit currency code, RMB: cny.",
    "5-2": "cny",
    "6-0": "userName",
    "6-1": " The real name of the user who initiated the payment.",
    "6-2": "zhang san",
    "7-0": "reqTime",
    "7-1": "**required**.Request interface time, 13-digit timestamp.",
    "7-2": "1622016572190",
    "8-0": "version",
    "8-1": "**required**.interface version number, fixed: 1.0.",
    "8-2": "1.0",
    "9-0": "signType",
    "9-1": "**required**.Signature type, currently only supports MD5 method.",
    "9-2": "MD5",
    "10-0": "sign",
    "10-1": "**required**.Signature value, see [signature algorithm](https://pass2pay.readme.io/reference/signing-a-request) for details.",
    "10-2": "C380BEC2BFD727A4B6845133519F3AD6",
    "11-0": "subject",
    "11-1": "**required**.product title,Please enter a fixed value:商品",
    "11-2": "商品",
    "12-0": "body",
    "12-1": "**required**.Please enter a fixed value: 0",
    "12-2": "0",
    "13-0": "clientIp",
    "13-1": "**required**.Client IPV4 address",
    "13-2": "210.73.10.148",
    "14-0": "notifyUrl",
    "14-1": "Payment result asynchronous callback URL, **the callback will be initiated only when this value is passed**",
    "14-2": "<https://www.yourserver.com/notify.htm>",
    "15-0": "returnUrl",
    "15-1": "Payment result synchronization jump notification URL",
    "15-2": "<https://www.yourserver.com/return.htm>",
    "16-0": "expiredTime",
    "16-1": "Order expiration time, unit seconds, default 2 hours. The order will expire after (creation time + expiration time)",
    "16-2": "3600",
    "17-0": "channelExtra",
    "17-1": "Additional parameters initiated by a specific channel, json format string. For details, see the [Payment method](https://pass2pay.readme.io/reference/payment-method) description",
    "17-2": "{\"auth_code\":\"13920933111042\"}",
    "18-0": "extParam",
    "18-1": "Merchant extended parameters, which will be returned unchanged during callback",
    "18-2": "134586944573118714"
  },
  "cols": 3,
  "rows": 19,
  "align": [
    "left",
    "left",
    "left"
  ]
}
[/block]


***

Request sample：

```json
{
  "amount": 8,
  "extParam": "",
  "mchOrderNo": "mho1624005107281",
  "subject": "商品",
  "wayCode": "ALI_BAR",
  "sign": "84F606FA25A6EC4783BECC08D4FDC681",
  "reqTime": "1624005107",
  "body": "0",
  "version": "1.0",
  "channelExtra": "{\"authCode\":\"280812820366966512\"}",
  "appId": "60cc09bce4b0f1c0b83761c9",
  "clientIp": "192.166.1.132",
  "notifyUrl": "https://www.youernotify.com",
  "signType": "MD5",
  "currency": "cny",
  "userName": "zhangsan",
  "returnUrl": "",
  "mchNo": "M1623984572"
}
```

### Response parameters

| Parameter | Required | Sample value                     | Description                                                                             |
| --------- | -------- | -------------------------------- | --------------------------------------------------------------------------------------- |
| code      | yes      | 0                                | 0 - processing successful, other - processing error, see error code for details         |
| msg       | No       | Signing failure                  | Specific error reasons, such as: signature failure, parameter format verification error |
| sign      | No       | CCD9083A6DAD9A2DA9F668C3D4517A84 | Sign the data in data. If data is empty, it will not be returned.                       |
| **data**  | No       | {}                               | Return Payment Order, json format data.See payment order below                          |

 **Payment Order  :**

[block:parameters]
{
  "data": {
    "h-0": "Parameter name",
    "h-1": "Sample value",
    "h-2": "Description",
    "0-0": "payOrderId",
    "0-1": "U12021022311124442600",
    "0-2": "**Required**.Return payment system order number",
    "1-0": "mchOrderNo",
    "1-1": "20160427210604000490",
    "1-2": "**Required**Returns the order number passed in by the merchant",
    "2-0": "orderState",
    "2-1": "2",
    "2-2": "**Required**.Payment order status<br>0-Order generated<br>1-Payment in progress<br>2-Payment successful<br>3-Payment failed<br>4-Cancelled\\< br>5-Refunded<br>6-Order closed",
    "3-0": "payDataType",
    "3-1": "payUrl",
    "3-2": "**Required**.Payment parameter type<br>payUrl-Jump link method<br>form-Form method<br>codeUrl-QR code address<br>codeImgUrl-QR code image Address<br>none-null payment parameter",
    "4-0": "payData",
    "4-1": "<http://www.passtopay.com/qr-code.html>",
    "4-2": "The payment parameters used for initiating a payment, such as the Alipay QR code collection address link.",
    "5-0": "payOrderInfo",
    "5-1": "{}",
    "5-2": "Order information, this data will be returned when direct payment is successful",
    "6-0": "errCode",
    "6-1": "ACQ.PAYMENT_AUTH_CODE_INVALID",
    "6-2": "Error code returned by the upstream channel",
    "7-0": "errMsg",
    "7-1": "Business Failed Message",
    "7-2": "Error description returned by the upstream channel"
  },
  "cols": 3,
  "rows": 8,
  "align": [
    null,
    null,
    null
  ]
}
[/block]


**Reponse sample**

```json
{
  "code": 0,
  "data": {
    "errCode": "ACQ.PAYMENT_AUTH_CODE_INVALID",
    "errMsg": "Business Failed",
    "mchOrderNo": "mho1624005752661",
    "orderState": 3,
    "payOrderId": "P202106181642329900002"
  },
  "msg": "SUCCESS",
  "sign": "F4DA202C516D1F33A12F1E547C5004FD"
}
```

Here is a snippet of code for initiating the creation of a payment order in different languages for reference(**Note that the code does not handle exception scenarios**):

```java
        Map<String, Object> map = new HashMap<>();
        map.put("mchNo", "Merchant Number...");
        map.put("appId", "App ID...");
        map.put("mchOrderNo", "Unique Order Number...");
        map.put("wayCode", "ALI_QR");
        map.put("amount", 10000);
        map.put("currency", "cny");
        map.put("userName", "zhang san...");
        map.put("reqTime", 1711021401000l);
        map.put("version", "1.0");
        map.put("subject", "Children's clothing...");
        map.put("body", "A red down jacket...");
        map.put("notifyUrl", "https://www...");
        JSONObject extParams = new JSONObject();
        extParams.put("payDataType", "codeImgUrl");
        map.put("channelExtra", extParams);
        map.put("signType", "MD5");
        map.put("sign", "5182B5B0...");
        HttpResponse response = HttpRequest
                .post("http://api.pass2pay.com/api/pay/unifiedOrder")
                .form(map).execute();
        JSONObject responseJson = JSON.parseObject(response.body());
        if(responseJson.getIntValue("code") != 0){
            // failed, Please check the configuration or contact us
        }else{
            //successful, return customer payment order info
        }
```
```php
Copy
<?php
$map = array(
    "mchNo" => "Merchant Number...",
    "appId" => "App ID...",
    "mchOrderNo" => "Unique Order Number...",
    "wayCode" => "ALI_QR",
    "amount" => 10000,
    "currency" => "cny",
    "userName" => "zhang san...",
    "reqTime" => 1711021401000,
    "version" => "1.0",
    "signType" => "MD5",
    "sign" => "5182B5B0...",
    "subject" => "Children's clothing...",
    "body" => "A red down jacket...",
    "notifyUrl" => "https://www..."
);

$extParams = array(
    "payDataType" => "codeImgUrl"
);
$map["channelExtra"] = $extParams;

$response = Requests::post('http://api.pass2pay.com/api/pay/unifiedOrder', array(), $map);
$responseJson = json_decode($response->body, true);

if ($responseJson["code"] != 0) {
    // failed, Please check the configuration or contact us
} else {
    // successful, return customer payment order info
}
?>
```
```typescript Node.js
const axios = require('axios');

const requestData = {
  mchNo: "Merchant Number...",
  appId: "App ID...",
  mchOrderNo: "Unique Order Number...",
  wayCode: "ALI_QR",
  amount: 10000,
  currency: "cny",
  userName: "zhang san...",
  reqTime: 1711021401000,
  version: "1.0",
  signType: "MD5",
  sign: "5182B5B0...",
  subject: "Children's clothing...",
  body: "A red down jacket...",
  notifyUrl: "https://www...",
  channelExtra: {
    payDataType: "codeImgUrl"
  }
};

axios.post('http://api.pass2pay.com/api/pay/unifiedOrder', requestData)
  .then(response => {
    const responseJson = response.data;
    if (responseJson.code !== 0) {
      // failed, Please check the configuration or contact us
    } else {
      // successful, return customer payment order info
    }
  })
  .catch(error => {
    // handle error
  });
```
```python
import requests

requestData = {
    "mchNo": "Merchant Number...",
    "appId": "App ID...",
    "mchOrderNo": "Unique Order Number...",
    "wayCode": "ALI_QR",
    "amount": 10000,
    "currency": "cny",
    "userName": "zhang san...",
    "reqTime": 1711021401000,
    "version": "1.0",
    "signType": "MD5",
    "sign": "5182B5B0...",
    "subject": "Children's clothing...",
    "body": "A red down jacket...",
    "notifyUrl": "https://www...",
    "channelExtra": {
        "payDataType": "codeImgUrl"
    }
}

response = requests.post('http://api.pass2pay.com/api/pay/unifiedOrder', json=requestData)
responseJson = response.json()

if responseJson["code"] != 0:
    # failed, Please check the configuration or contact us
else:
    # successful, return customer payment order info
```
```go
package main

import (
	"bytes"
	"encoding/json"
	"fmt"
	"io/ioutil"
	"net/http"
)

func main() {
	requestData := map[string]interface{}{
		"mchNo":      "Merchant Number...",
		"appId":      "App ID...",
		"mchOrderNo": "Unique Order Number...",
		"wayCode":    "ALI_QR",
		"amount":     10000,
		"currency":   "cny",
		"userName":   "zhang san...",
		"reqTime":    1711021401000,
		"version":    "1.0",
		"signType":   "MD5",
		"sign":       "5182B5B0...",
		"subject":    "Children's clothing...",
		"body":       "A red down jacket...",
		"notifyUrl":  "https://www...",
		"channelExtra": map[string]string{
			"payDataType": "codeImgUrl",
		},
	}

	requestBody, err := json.Marshal(requestData)
	if err != nil {
		fmt.Println("Error marshaling request body:", err)
		return
	}

	resp, err := http.Post("http://api.pass2pay.com/api/pay/unifiedOrder", "application/json", bytes.NewBuffer(requestBody))
	if err != nil {
		fmt.Println("Error sending request:", err)
		return
	}
	defer resp.Body.Close()

	responseBody, err := ioutil.ReadAll(resp.Body)
	if err != nil {
		fmt.Println("Error reading response body:", err)
		return
	}

	var responseJson map[string]interface{}
	err = json.Unmarshal(responseBody, &responseJson)
	if err != nil {
		fmt.Println("Error unmarshaling response body:", err)
		return
	}

	if responseJson["code"].(float64) != 0 {
		// failed, Please check the configuration or contact us
		fmt.Println("Request failed:", responseJson["message"])
	} else {
		// successful, return customer payment order info
		fmt.Println("Request succeeded:", responseJson["data"])
	}
}
```
